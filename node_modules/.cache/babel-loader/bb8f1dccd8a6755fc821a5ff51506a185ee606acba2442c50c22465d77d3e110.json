{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/projects/comments-section/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/Desktop/projects/comments-section/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/Desktop/projects/comments-section/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/Users/user/Desktop/projects/comments-section/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import React,{useState,useEffect}from\"react\";import styled from\"styled-components\";import{useQuery,useMutation}from\"react-query\";import{getComments}from\"../services/comments\";import CommentCard from\"../components/Comment/CommentCard\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.section(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  max-width: 100%; \\n  height:auto ;\\n  margin: 0 auto; \\n  @media only screen and (min-width: 1000px){\\n    position:relative ;\\n    display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  width: 800px;\\n  }\\n\"])));var SubContainer=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  max-width: 100%;\\n  padding-left: 20px;\\n  border-left: 2px solid #9999a1;\\n  margin-left: 40px;\\n  @media only screen and (min-width: 1000px){\\n  }\\n\"])));var CommentsScreen=function CommentsScreen(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useQuery=useQuery(\"currentUser\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/data.json\");case 2:result=_context.sent;return _context.abrupt(\"return\",result.data.currentUser);case 4:case\"end\":return _context.stop();}},_callee);}))),currentUser=_useQuery.data;var _useQuery2=useQuery(\"comments\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/data.json\");case 2:result=_context2.sent;return _context2.abrupt(\"return\",result.data.comments);case 4:case\"end\":return _context2.stop();}},_callee2);})),{onSuccess:function onSuccess(data){setComments(data);}}),isLoading=_useQuery2.isLoading;return/*#__PURE__*/_jsx(Container,{children:comments.map(function(comment){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CommentCard,{data:comment,currentUser:currentUser.username}),comment.replies.length>0&&/*#__PURE__*/_jsx(SubContainer,{children:comment.replies.map(function(reply){return/*#__PURE__*/_jsx(CommentCard,{data:reply,currentUser:currentUser.username});})})]});})});};export default CommentsScreen;","map":{"version":3,"names":["React","useState","useEffect","styled","useQuery","useMutation","getComments","CommentCard","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Container","section","_templateObject","_taggedTemplateLiteral","SubContainer","div","_templateObject2","CommentsScreen","_useState","_useState2","_slicedToArray","comments","setComments","_useQuery","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","get","sent","abrupt","data","currentUser","stop","_useQuery2","_callee2","_callee2$","_context2","onSuccess","isLoading","children","map","comment","username","replies","length","reply"],"sources":["C:/Users/user/Desktop/projects/comments-section/src/screens/CommentsScreen.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useQuery, useMutation } from \"react-query\";\r\nimport { getComments } from \"../services/comments\";\r\nimport CommentCard from \"../components/Comment/CommentCard\";\r\nimport axios from \"axios\";\r\n\r\n\r\nconst Container = styled.section`\r\n  width: 100%;\r\n  max-width: 100%; \r\n  height:auto ;\r\n  margin: 0 auto; \r\n  @media only screen and (min-width: 1000px){\r\n    position:relative ;\r\n    display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  width: 800px;\r\n  }\r\n`;\r\n\r\nconst SubContainer = styled.div`\r\n  max-width: 100%;\r\n  padding-left: 20px;\r\n  border-left: 2px solid #9999a1;\r\n  margin-left: 40px;\r\n  @media only screen and (min-width: 1000px){\r\n  }\r\n`;\r\n\r\nconst CommentsScreen = () => {\r\n\r\n  const [comments, setComments] = useState([]);\r\n\r\n  const { data: currentUser } = useQuery(\"currentUser\", async () => {\r\n    const result = await axios.get(\"/data.json\");\r\n    return result.data.currentUser;\r\n  });\r\n\r\n  const { isLoading } = useQuery(\"comments\", async () => {\r\n    const result = await axios.get(\"/data.json\");\r\n    return result.data.comments;\r\n  }, {\r\n    onSuccess: (data) => {\r\n      setComments(data);\r\n    }\r\n  });\r\n\r\n \r\n\r\n  return (\r\n    <Container>\r\n    {comments.map((comment) => (\r\n      <>\r\n        <CommentCard data={comment} currentUser={currentUser.username}  />\r\n        {comment.replies.length > 0 && (\r\n          <SubContainer>\r\n            {comment.replies.map((reply) => (\r\n              <CommentCard data={reply} currentUser={currentUser.username} />\r\n            ))}\r\n          </SubContainer>\r\n        )}\r\n      </>\r\n    ))}\r\n  </Container>\r\n  )\r\n            }\r\nexport default CommentsScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}